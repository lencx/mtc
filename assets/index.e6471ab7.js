import{e,u as t,r as n,R as r}from"./vendor.57733074.js";import{A as a}from"./index.2fb1d750.js";import{u as o,E as i,h as s,L as c,s as l,d as u}from"./fzj.6c0bcc7c.js";import{C as f,L as m}from"./index.8c761090.js";var v=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},d="object"==typeof e&&e&&e.Object===Object&&e,p="object"==typeof self&&self&&self.Object===Object&&self,g=d||p||Function("return this")(),b=g,j=function(){return b.Date.now()},E=/\s/;var y=function(e){for(var t=e.length;t--&&E.test(e.charAt(t)););return t},h=/^\s+/;var N=function(e){return e?e.slice(0,y(e)+1).replace(h,""):e},x=g.Symbol,O=x,T=Object.prototype,w=T.hasOwnProperty,I=T.toString,k=O?O.toStringTag:void 0;var C=function(e){var t=w.call(e,k),n=e[k];try{e[k]=void 0;var r=!0}catch(o){}var a=I.call(e);return r&&(t?e[k]=n:delete e[k]),a},L=Object.prototype.toString;var S=C,z=function(e){return L.call(e)},P=x?x.toStringTag:void 0;var $=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":P&&P in Object(e)?S(e):z(e)},M=function(e){return null!=e&&"object"==typeof e};var A=N,U=v,W=function(e){return"symbol"==typeof e||M(e)&&"[object Symbol]"==$(e)},D=/^[-+]0x[0-9a-f]+$/i,F=/^0b[01]+$/i,H=/^0o[0-7]+$/i,R=parseInt;var q=v,B=j,G=function(e){if("number"==typeof e)return e;if(W(e))return NaN;if(U(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=U(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=A(e);var n=F.test(e);return n||H.test(e)?R(e.slice(2),n?2:8):D.test(e)?NaN:+e},J=Math.max,K=Math.min;var Q=function(e,t,n){var r,a,o,i,s,c,l=0,u=!1,f=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=r,o=a;return r=a=void 0,l=t,i=e.apply(o,n)}function d(e){return l=e,s=setTimeout(g,t),u?v(e):i}function p(e){var n=e-c;return void 0===c||n>=t||n<0||f&&e-l>=o}function g(){var e=B();if(p(e))return b(e);s=setTimeout(g,function(e){var n=t-(e-c);return f?K(n,o-(e-l)):n}(e))}function b(e){return s=void 0,m&&r?v(e):(r=a=void 0,i)}function j(){var e=B(),n=p(e);if(r=arguments,a=this,c=e,n){if(void 0===s)return d(c);if(f)return clearTimeout(s),s=setTimeout(g,t),v(c)}return void 0===s&&(s=setTimeout(g,t)),i}return t=G(t)||0,q(n)&&(u=!!n.leading,o=(f="maxWait"in n)?J(G(n.maxWait)||0,t):o,m="trailing"in n?!!n.trailing:m),j.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=a=s=void 0},j.flush=function(){return void 0===s?i:b(B())},j};function V(){const e=t(),[v,d]=o(),[p,g]=v,[b,{loading:j,error:E,data:y}]=d,h=n.exports.useCallback(Q((()=>{l((()=>{p.pageInfo.hasNextPage&&b({variables:{cursor:p.pageInfo.cursor}})}))}),500,{leading:!0}),[p.pageInfo]);n.exports.useEffect((()=>(window.addEventListener("scroll",h,!1),()=>{window.removeEventListener("scroll",h,!1)})),[p.pageInfo]),n.exports.useEffect((()=>{!p.list.length&&b()}),[]),n.exports.useEffect((()=>{if(y){const{endCursor:e,hasNextPage:t}=y.repository.discussions.pageInfo;g({pageInfo:{cursor:e,hasNextPage:t},list:[...p.list,...y.repository.discussions.edges||[]]})}}),[y]);if(E)return r.createElement(i,null);const N=p.list;return r.createElement("div",{className:"home-view"},r.createElement("div",{className:"fzj-list-box"},r.createElement("div",{className:"fzj-list"},N.map((({node:t,cursor:n})=>{const{category:o,author:i,number:c,labels:l}=t;return r.createElement("div",{key:n,className:"fzj-item"},r.createElement("div",{className:"fzj-card",onClick:t=>((t,n)=>{t.stopPropagation(),e.push(`/issues/${n}`)})(t,c)},r.createElement("em",{className:"issues",onClick:e=>s(u(c),e)},"#",c),r.createElement("div",{className:"title"},r.createElement("span",null,t.title)),r.createElement("div",{className:"info"},r.createElement(f,{name:o.name,emoji:o.emojiHTML}),r.createElement(a,{avatar:i.avatarUrl,name:i.login,onClick:()=>s(i.url)}),r.createElement("div",{className:"labels"},l.edges.map((({node:e})=>r.createElement(m,{key:e.id,name:e.name,color:e.color})))))))})))),j&&N.length>0&&r.createElement("div",{className:"data-loading"},"Loading..."),r.createElement(c,{visible:j&&0===N.length}))}export default V;
